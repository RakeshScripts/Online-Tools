<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ATS Resume Score Checker</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#4f46e5;--good:#10b981;--bad:#ef4444}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial; background:linear-gradient(180deg,#081028 0%, #071426 100%); color:#e6eef8; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px}
    .wrap{width:100%;max-width:1100px}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    header h1{font-size:20px;margin:0}
    .grid{display:grid;grid-template-columns:360px 1fr;gap:18px}
    @media (max-width:860px){.grid{grid-template-columns:1fr} .left{order:2}}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); padding:18px; border-radius:12px}
    .left .drop{border:2px dashed rgba(255,255,255,0.04); padding:18px; border-radius:10px; text-align:center}
    .btn{display:inline-block;padding:10px 14px;border-radius:8px;background:var(--accent);color:white;text-decoration:none;cursor:pointer}
    input[type=file]{display:none}
    .meta{margin-top:12px;color:var(--muted);font-size:13px}

    /* Score card */
    .score-wrap{display:flex;gap:18px;align-items:center}
    .gauge{width:150px;height:150px;display:flex;align-items:center;justify-content:center}
    .score-number{font-size:28px;font-weight:700}
    .bar-legend{font-size:13px;color:var(--muted)}

    /* Suggestions */
    .suggestions{margin-top:12px}
    .suggestions li{margin:8px 0;padding:10px;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.02)}
    .suggestions li.good{border-left:6px solid var(--good)}
    .suggestions li.bad{border-left:6px solid var(--bad)}

    /* Text preview */
    .preview{white-space:pre-wrap;overflow:auto;max-height:380px;padding:12px;background:#081224;border-radius:8px;border:1px solid rgba(255,255,255,0.02);font-size:13px;color:#dce9ff}

    .k-grid{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .tag{padding:6px 8px;border-radius:999px;font-size:12px;background:rgba(255,255,255,0.03);color:var(--muted)}

    footer{margin-top:12px;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='36' height='36' viewBox='0 0 24 24' fill='none'><rect width='24' height='24' rx='4' fill='%234f46e5'/><path d='M6 12h12' stroke='white' stroke-width='1.5' stroke-linecap='round'/></svg>" alt="logo"/>
      <div>
        <h1>ATS Resume Score Checker</h1>
        <div style="color:var(--muted);font-size:13px">Upload your resume (PDF or .txt) or paste text — get a 1–100 ATS score + suggestions</div>
      </div>
    </header>

    <div class="grid">
      <div class="left">
        <div class="card">
          <div class="drop" id="drop">
            <p style="margin:6px 0;font-weight:600">Drop resume here</p>
            <p style="margin:6px 0;color:var(--muted);font-size:13px">Supports PDF and TXT. For DOCX paste text into the box below.</p>
            <label class="btn" for="file">Choose file</label>
            <input id="file" type="file" accept=".pdf,.txt" />
            <div class="meta" id="fileMeta"></div>
          </div>

          <div style="margin-top:12px">
            <label style="font-size:13px;color:var(--muted)">Or paste resume text</label>
            <textarea id="paste" placeholder="Paste resume text here" style="width:100%;height:140px;margin-top:8px;padding:12px;border-radius:8px;background:#071422;border:1px solid rgba(255,255,255,0.02);color:#dfecff;resize:vertical"></textarea>
            <div style="display:flex;gap:8px;margin-top:8px;justify-content:flex-end">
              <button class="btn" id="analyzeBtn">Analyze</button>
              <button class="btn" id="clearBtn" style="background:transparent;border:1px solid rgba(255,255,255,0.06)">Clear</button>
            </div>
          </div>

        </div>

        <div class="card" style="margin-top:12px">
          <h3 style="margin:0 0 8px 0">Extracted preview</h3>
          <div class="preview" id="preview">No file loaded.</div>
          <div class="k-grid" id="keywords"></div>
        </div>
      </div>

      <div class="right">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <h3 style="margin:0">Scoreboard</h3>
              <div style="color:var(--muted);font-size:13px">Graphical score (1–100) with breakdown & actionable suggestions</div>
            </div>
            <div style="text-align:right">
              <div style="font-size:12px;color:var(--muted)">Last run:</div>
              <div id="lastRun" style="font-weight:600">—</div>
            </div>
          </div>

          <div style="display:flex;gap:18px;align-items:center;margin-top:12px;flex-wrap:wrap">
            <div class="gauge">
              <svg id="gsvg" viewBox="0 0 36 36" width="150" height="150">
                <path d="M18 2.0845a15.9155 15.9155 0 1 1 0 31.831" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="2"/>
                <path id="pbar" d="M18 2.0845a15.9155 15.9155 0 1 1 0 31.831" fill="none" stroke="url(#g)" stroke-width="2.6" stroke-linecap="round" stroke-dasharray="0 100"></path>
                <defs>
                  <linearGradient id="g" x1="0" x2="1"><stop offset="0%" stop-color="#4f46e5"/><stop offset="100%" stop-color="#06b6d4"/></linearGradient>
                </defs>
                <text x="18" y="20" text-anchor="middle" font-size="5" fill="white" id="scoreText">0</text>
              </svg>
            </div>

            <div style="flex:1;min-width:240px">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div>
                  <div style="font-size:13px;color:var(--muted)">ATS Score</div>
                  <div class="score-number" id="bigScore">0/100</div>
                </div>
                <div style="text-align:right">
                  <div class="bar-legend" id="rating">—</div>
                </div>
              </div>

              <div style="margin-top:12px">
                <h4 style="margin:0 0 8px 0">Breakdown</h4>
                <div id="breakdown"></div>
              </div>
            </div>

          </div>

          <div style="margin-top:12px">
            <h4 style="margin:0 0 8px 0">Suggestions</h4>
            <ul class="suggestions" id="suggestionsList">
              <li style="color:var(--muted)">Run analysis to get suggestions.</li>
            </ul>
          </div>

        </div>

        <div class="card" style="margin-top:12px">
          <h4 style="margin:0 0 8px 0">Notes</h4>
          <div style="color:var(--muted);font-size:13px">This is a lightweight client-side checker that looks for ATS-friendly features: clear headings, contact details, keywords, bullet lists and realistic length. Use this to improve match rate — for final optimization check job description keywords and tailor per-application.</div>
          <footer>Supported: PDF, TXT. For DOCX paste text into box.</footer>
        </div>

      </div>
    </div>
  </div>

<script>
// Minimal PDF text extraction using pdf.js from CDN if available. If pdfjs not loaded, advise paste.
// We'll try to load pdf.js dynamically.
(function(){
  const fileInput = document.getElementById('file');
  const drop = document.getElementById('drop');
  const preview = document.getElementById('preview');
  const analyzeBtn = document.getElementById('analyzeBtn');
  const paste = document.getElementById('paste');
  const clearBtn = document.getElementById('clearBtn');
  const fileMeta = document.getElementById('fileMeta');
  const keywordsWrap = document.getElementById('keywords');
  const suggestionsList = document.getElementById('suggestionsList');
  const breakdown = document.getElementById('breakdown');
  const lastRun = document.getElementById('lastRun');
  const scoreText = document.getElementById('scoreText');
  const pbar = document.getElementById('pbar');
  const bigScore = document.getElementById('bigScore');
  const rating = document.getElementById('rating');

  let lastText = '';

  function setPreview(text){
    preview.textContent = text || 'No file loaded.';
  }

  function animateGauge(score){
    const pct = Math.max(0,Math.min(100,score));
    const dash = pct + ' ' + (100-pct);
    pbar.setAttribute('stroke-dasharray', dash);
    scoreText.textContent = pct;
    bigScore.textContent = pct + '/100';
    rating.textContent = pct >= 80 ? 'Excellent' : pct >= 60 ? 'Good' : pct >= 40 ? 'Fair' : 'Needs work';
    if(pct>=80) pbar.setAttribute('stroke','var(--good)');
    else if(pct>=60) pbar.setAttribute('stroke','#f59e0b');
    else pbar.setAttribute('stroke','var(--bad)');
  }

  function timeStamp(){ return new Date().toLocaleString(); }

  // Drag/drop
  ['dragenter','dragover'].forEach(e=>drop.addEventListener(e,ev=>{ev.preventDefault(); drop.style.opacity=0.9;}));
  ['dragleave','drop'].forEach(e=>drop.addEventListener(e,ev=>{ev.preventDefault(); drop.style.opacity=1;}));
  drop.addEventListener('drop',async ev=>{ const f=ev.dataTransfer.files[0]; if(f) handleFile(f);});
  fileInput.addEventListener('change',e=>{ const f=e.target.files[0]; if(f) handleFile(f);});

  clearBtn.addEventListener('click',()=>{ paste.value=''; setPreview('No file loaded.'); fileMeta.textContent=''; lastText=''; keywordsWrap.innerHTML=''; breakdown.innerHTML=''; suggestionsList.innerHTML='<li style="color:var(--muted)">Run analysis to get suggestions.</li>'; animateGauge(0); lastRun.textContent='—'; });

  analyzeBtn.addEventListener('click',()=>{ const t = paste.value.trim() || lastText; if(!t){ alert('No text to analyze. Paste text or upload a PDF/TXT.'); return;} runAnalysis(t); });

  async function handleFile(file){
    fileMeta.textContent = `${file.name} — ${Math.round(file.size/1024)} KB`;
    const ext = (file.name.split('.').pop() || '').toLowerCase();
    if(ext==='txt'){
      const txt = await file.text(); lastText = txt; setPreview(txt.slice(0,4000)); paste.value=''; runAnalysis(txt);
    } else if(ext==='pdf'){
      try{
        const pdfText = await extractTextFromPDF(file);
        lastText = pdfText; setPreview(pdfText.slice(0,4000)); paste.value=''; runAnalysis(pdfText);
      } catch(err){
        console.error(err); alert('Unable to extract text from PDF in this browser. Please paste text into the box.');
      }
    } else {
      alert('Unsupported file type. Please use PDF or TXT. For DOCX paste the text into the box.');
    }
  }

  // Try to load pdf.js dynamically
  async function ensurePDFJS(){
    if(window.pdfjsLib) return window.pdfjsLib;
    return new Promise((resolve,reject)=>{
      const s=document.createElement('script');
      s.src='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js';
      s.onload=()=>{ window.pdfjsLib = window['pdfjs-dist/build/pdf']; if(!window.pdfjsLib && window.pdfjsLib===undefined){ /* try alternative global */ }
        // fallback: some builds expose pdfjsLib under pdfjsLib
        if(!window.pdfjsLib && window.pdfjsLib===undefined){ }
        window.pdfjsLib.GlobalWorkerOptions = window.pdfjsLib.GlobalWorkerOptions || {};
        try{ window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js'; }catch(e){}
        resolve(window.pdfjsLib);
      };
      s.onerror=()=>reject(new Error('Failed to load pdf.js'));
      document.head.appendChild(s);
    });
  }

  async function extractTextFromPDF(file){
    const pdfjs = await ensurePDFJS();
    const array = new Uint8Array(await file.arrayBuffer());
    const pdf = await pdfjs.getDocument({data:array}).promise;
    let full = '';
    for(let i=1;i<=pdf.numPages;i++){
      const page = await pdf.getPage(i);
      const content = await page.getTextContent();
      const strs = content.items.map(it=>it.str);
      full += strs.join(' ') + '\n\n';
    }
    return full;
  }

  // Analysis core
  function runAnalysis(text){
    const t = text.replace(/[\u00A0\u200B]/g,' ').trim();
    const lc = t.toLowerCase();
    lastRun.textContent = timeStamp();

    // Scoring components weights sum to 100
    const weights = {contact:15,headings:20,keywords:30,length:10,dates:10,bullets:15};

    // contact info
    const hasEmail = /[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}/i.test(t);
    const hasPhone = /(?:(?:\+?\d{1,3}[\s-]?)?(?:\d{10}|\d{3}[\s-]\d{3}[\s-]\d{4}|\(\d{3}\)\s?\d{3}-?\d{4}))/i.test(t);
    const contactScore = ( (hasEmail?1:0) + (hasPhone?1:0) ) /2 * weights.contact;

    // headings
    const headings = ['experience','education','skills','projects','certifications','summary','objective'];
    let foundHeadings=0; for(const h of headings) if(lc.indexOf('\n'+h) !== -1 || lc.indexOf('\n'+h+':')!==-1 || lc.includes('\n'+h.toUpperCase())) foundHeadings++;
    const headingScore = Math.min(1, foundHeadings / 3) * weights.headings; // expect at least 3 headings

    // keywords
    const commonKeywords = ['experience','skills','education','project','managed','developed','designed','python','java','javascript','aws','sql','linux','docker','lead','analysis','marketing','sales','communication','excel'];
    let kwFound=0; const kwList=[];
    for(const kw of commonKeywords){ if(lc.includes(kw)){ kwFound++; kwList.push(kw);} }
    const keywordScore = Math.min(1, kwFound / 8) * weights.keywords;

    // length
    const words = t.split(/\s+/).filter(Boolean).length;
    let lengthScore = 0;
    if(words >= 300 && words <= 1200) lengthScore = weights.length; // ideal
    else if(words >= 200 && words < 300) lengthScore = weights.length * 0.7;
    else if(words > 1200 && words <= 2000) lengthScore = weights.length * 0.6;
    else lengthScore = weights.length * 0.2;

    // dates / timeline
    const hasYear = /\b(19|20)\d{2}\b/.test(t);
    const datesScore = hasYear ? weights.dates : 0;

    // bullets/formatting
    const bulletLike = (t.match(/(^|\n)\s*([-•*]\s+|\d+\.)/g) || []).length;
    const bulletsScore = Math.min(1, bulletLike/6) * weights.bullets;

    const total = Math.round(contactScore + headingScore + keywordScore + lengthScore + datesScore + bulletsScore);

    animateGauge(total);

    // Breakdown UI
    breakdown.innerHTML = '';
    const breakdownItems = [
      {k:'Contact info',v:Math.round(contactScore),max:weights.contact,ok:hasEmail||hasPhone},
      {k:'Headings (Experience/Education/Skills)',v:Math.round(headingScore),max:weights.headings,ok:foundHeadings>=3},
      {k:'Keywords',v:Math.round(keywordScore),max:weights.keywords,ok:kwFound>=8},
      {k:'Length (words)',v:Math.round(lengthScore),max:weights.length,ok:words>=300 && words<=1200},
      {k:'Dates/Timeline',v:Math.round(datesScore),max:weights.dates,ok:hasYear},
      {k:'Bullets / formatting',v:Math.round(bulletsScore),max:weights.bullets,ok:bulletLike>=4}
    ];
    for(const it of breakdownItems){
      const el = document.createElement('div');
      el.style.display='flex'; el.style.justifyContent='space-between'; el.style.margin='6px 0';
      el.innerHTML = `<div style="min-width:200px">${it.k}</div><div style="text-align:right">${it.v}/${it.max}</div>`;
      breakdown.appendChild(el);
    }

    // Suggestions
    suggestionsList.innerHTML='';
    if(!hasEmail) addSuggestion('Add a professional email address in the header.', false);
    else addSuggestion('Email found.', true);
    if(!hasPhone) addSuggestion('Include a phone number (international format preferred).', false);
    else addSuggestion('Phone number found.', true);

    if(foundHeadings<3) addSuggestion('Add clear headings: Experience, Education, Skills (each as separate sections).', false);
    else addSuggestion('Good section headings present.', true);

    if(kwFound < 6) addSuggestion('Include more role-specific keywords (technologies, tools, certifications) tailored to the job description.', false);
    else addSuggestion('Resume contains a healthy number of keywords.', true);

    if(words < 300) addSuggestion('Resume is short (<300 words). Add concise bullet points describing accomplishments with numbers.', false);
    else if(words > 1600) addSuggestion('Resume is long (>1600 words). Consider trimming to keep it concise and ATS-friendly.', false);
    else addSuggestion('Length looks reasonable.', true);

    if(!hasYear) addSuggestion('Include dates or years for roles/education to show timeline.', false);
    else addSuggestion('Dates/timeline present.', true);

    if(bulletLike < 4) addSuggestion('Use bullet points for responsibilities and achievements (use - or •).', false);
    else addSuggestion('Uses bullets—good for ATS parsing.', true);

    // show top keywords
    keywordsWrap.innerHTML = '';
    for(const k of kwList.slice(0,20)){ const t=document.createElement('div'); t.className='tag'; t.textContent=k; keywordsWrap.appendChild(t); }

    function addSuggestion(text, positive){ const li=document.createElement('li'); li.textContent=text; li.className = positive? 'good': 'bad'; suggestionsList.appendChild(li); }
  }

})();
</script>
</body>
</html>
